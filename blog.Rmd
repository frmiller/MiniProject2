---
title: "Mini-Project 2"
author: "Starry Zhou, Fiona Miller, Josephine Nyoike"
date: "March 24, 2017"
output: html_document
---

## goals
1 write a function to find the portion of the contribution to one candidate
2 apply the function to multiple candidates (possibly several candidates in one state)

## load data
```{r, message=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
load("individuals.rda")
library(tidyverse)
```

## wrangle data
```{r}

MA_only <- candidates %>% filter(cand_office_state == "MA", cand_election_yr== "2012") %>%
  select(cand_id, cand_name, cand_party_affiliation, cand_office)

contr_small <- contributions %>%
  select(cmte_id, transaction_amt, cand_id) %>%
  filter(transaction_amt >0)

indv_small <- individuals %>%
  select(cmte_id, transaction_amt) %>%
  filter(transaction_amt >0)
```


## Joining tables
```{r}
joined <- 
  MA_only %>%
  left_join(contr_small,by="cand_id")
```

## 
```{r}
j2 <- joined %>%
  select(-cmte_id)

j3 <- j2 %>%
  group_by(cand_id) %>%
  summarise(total = sum(transaction_amt))
  
final <- 
  MA_only %>%
  left_join(j3, by="cand_id")
final
```

## 
```{r}
all <- final %>%
  summarise(N = sum(total,na.rm=TRUE))
all
```

```{R}
##create function to find proportion of donations one candidate gets in contrast to the other candidates in the state
person_prop <- function(id) 
  final %>%
    filter(cand_id == id) %>%
    summarize(prop=(total/(23351994))*100)%>%
    select(prop)
```
```{r}
person_prop(id="H0MA04036")
```
## Blog

explaining the visaul and what found from data

## Grading Rubric

To get full credit for this Mini-Project, you must earn 10 points out of the following 12:

Baseline

+1 for an .Rmd that compiles without errors
+1 for including the code that wrangled the data
+1 for using at least two of the five basic verbs (i.e., select(), mutate(), etc.)
+1 for annotating your data wrangling pipeline (this can be in a few sentences in text surrounding the R code chunks, or some informative comments inside the R code chunks)
+1 unnecessary messages from R are hidden from being displayed in the HTML
Average

+1 for explaining in a single coherent sentence what we can learn from these data
+1 for writing a function rather than re-writing the same code multiple times
+1 for using at least one join (e.g. left_join(), inner_join(), etc.)
+1 blog post text provides context or background useful in interpreting the graphic
+1 for using GitHub for version control
Advanced

+1 for using the Issues tab on GitHub to plan your project
+1 WOW factor: awarded at the professorsâ€™ discretion for submissions that are exceptionally compelling
